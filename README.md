# BansrChat 基本使用指南

本项目是由Claude、DeepSeek等大模型共同生成，本人小白，仅提供思路。并整合、修改代码而成。欢迎各位大神、专家完善本项目。

## 运行模式

BansrChat 支持两种运行模式：

1. **直接对话模式** - 无需唤醒词，直接进行语音对话
2. **唤醒词模式** - 需要先说出唤醒词，才能开始对话

## 直接对话模式

### 启动方法

```bash
python ASR.py
```

### 交互流程

1. 程序启动后，会立即开始监听您的语音
2. 对着麦克风说话，系统会实时显示识别结果
3. 当您停止说话后（静音2秒），系统会自动结束录音
4. 星火大模型会处理您的问题并生成回复
5. 系统会通过语音合成播放回复内容
6. 回复播放完成后，系统会自动开始下一轮对话

### 结束对话

在任意对话中说出以下关键词之一可以结束程序：
- "停止"
- "退出"
- "结束程序"
- "关闭"
- "拜拜"
- "再见"

## 唤醒词模式

### 启动方法

```bash
python WakeUp.py
```

### 交互流程

1. 程序启动后，会等待您说出唤醒词
2. 默认唤醒词为：“一二三”（可在.env中自定义，建议选择常用词汇，Vosk的本地语言模型性能有限）
3. 当检测到唤醒词后，系统会播放欢迎语
4. 进入对话模式，操作方式与直接对话模式相同
5. 对话结束后（使用关键词退出或自然结束），系统会回到等待唤醒状态

## 常见问题解决

### 语音识别问题

如果您遇到语音识别不准确的问题：
- 确保使用较好的麦克风
- 尽量在安静的环境中使用
- 清晰地发音
- 调整 `.env` 文件中的识别相关参数

### 语音合成问题

如果语音合成效果不佳：
- 尝试调整 `.env` 文件中的 `TTS_VOICE`、`TTS_SPEED`、`TTS_VOLUME` 等参数
- 考虑启用超拟人语音合成模式（设置 `USE_SUPER_TTS=true`）

### 系统响应慢或无响应

如果系统响应速度慢：
- 检查网络连接
- 确认讯飞API密钥配置正确
- 查看控制台输出是否有错误信息

## 高级用法

### 自定义唤醒词

编辑 `.env` 文件中的 `WAKE_WORDS` 参数，多个唤醒词用逗号分隔。例如：

```
WAKE_WORDS=你好助手,小助手醒醒,开始对话
```

### 自定义大模型系统提示词

编辑 `.env` 文件中的 `SPARK_SYSTEM_PROMPT` 参数可以设置大模型的系统提示词，例如：

```
SPARK_SYSTEM_PROMPT=你是一个专业的助手，擅长回答简短清晰的问题
```

### 静音检测灵敏度调整

如果您发现系统过早结束录音或无法检测到您的语音输入完成，可以在代码中调整以下参数：

- `ASR.py` 文件中的 `SILENCE_THRESHOLD` 变量：调整静音检测的阈值
- `ASR.py` 文件中的 `MAX_SILENCE_TIME` 变量：调整静音持续多久后结束录音
